import"./default-CIqDDot3.js";const M=[{name:"전체",img:"",val:0},{name:"캐리",img:"img/icon_carry.jpg",val:1},{name:"미드",img:"img/icon_nuker.jpg",val:2},{name:"오프레이너",img:"img/icon_duration.jpg",val:3},{name:"서포터",img:"img/icon_support.jpg",val:4},{name:"하드 서포터",img:"img/icon_jungler.jpg",val:5}],A=[{name:"Immortal+",val:80},{name:"Divine+",val:70},{name:"Ancient+",val:60},{name:"Legend+",val:50},{name:"Arcorn+",val:40},{name:"Crusader+",val:30},{name:"Guardian+",val:20},{name:"Herald+",val:10}];ARRAY_PATCH_INFO=[{name:"7.36",val:55},{name:"7.35",val:54},{name:"7.34",val:53},{name:"7.33",val:52},{name:"7.32",val:51},{name:"7.31",val:50}];var y=A[0].val,$=ARRAY_PATCH_INFO[0].val,p=M[0].val,C=[],H=[],x=null,I=null;window.onload=()=>{function c(e,t,n){html=`<li><a href="${e}" target="_blank" class="css-mtyeel e1y3xkpj0"><img src="${t}" width="46" alt="garen" height="46"><span>${n}</span></a></li>`,document.getElementById("navHeroContainer").innerHTML+=html}function g(e,t,n,a,i,o,r,d){index=`<td class="table_default rank"><span>${e}</span></td>`,name_=`<td class="table_default hero"><a id="hero_${e}" href="#"><img src="${t}" width="32" alt="${n}" height="32"><strong>${n}</strong></a></td>`,tier_=`<td class="table_default tier"><img src="img/icon-tier-${a}.svg" style="background:none; width:24px; height:24px; text-align:center;vertical-align:middle;"><span class=""></span>${a}</td>`,win_rate_=`<td class="table_default number">${o}%</td>`,pick_rate_=`<td class="table_default number">${i}%</td>`,ban_rate_=`<td class="table_default number">${r}%</td>`,against_heroes_='<td class="table_default"></td>',html=`<tr>${index}${name_}${tier_}${win_rate_}${pick_rate_}${ban_rate_}${against_heroes_}</tr>`,document.getElementById("mainHeroContainer").insertAdjacentHTML("beforeend",html),document.getElementById(`hero_${e}`).addEventListener("click",u=>{location.href=G(e)})}function l(){document.getElementById("navHeroContainer").innerHTML="";for(var e=0;e<C.length;e++){var t=C[e],n=`https://www.dota2.com/hero/${t.localized_name.replace(" ","")}?l=koreana`;c(n,`img/heroes/${t.real_name}.png`,t.localized_name_kor)}}function s(e){var t=document.getElementById("btn_rank"),n=A.length-e/10,a=A[n];t.firstElementChild.setAttribute("src",k(a.val)),t.lastElementChild.textContent=a.name,t.setAttribute("value",e),sessionStorage.setItem("tier",e),y=e}function f(e){var t=document.getElementById("btn_patch"),n=ARRAY_PATCH_INFO.length-(e-50)-1,a=ARRAY_PATCH_INFO[n];t.lastElementChild.textContent=a.name,t.setAttribute("value",e),sessionStorage.setItem("patch",e),$=e}function b(e){var t=document.getElementsByClassName("role_list")[0];t.setAttribute("value",e),sessionStorage.setItem("role",e),p=e}function k(e){return`img/rank_icon_${e/10}.png`}function R(){const e=document.getElementById("btn_rank"),t=document.getElementById("div_tier"),n=a=>{s(a.getAttribute("value"));var i=document.getElementsByClassName("tier_container")[0];i.parentElement.removeChild(i),T()};e.addEventListener("click",a=>{if(t.childElementCount!=1){n(e);return}var i=document.createElement("div");i.classList.add("tier_container"),A.forEach(o=>{var r=document.createElement("button"),d=document.createElement("img"),u=document.createElement("span");r.setAttribute("type","button"),r.setAttribute("value",o.val),r.classList.add("option_button"),d.setAttribute("src",k(o.val)),d.setAttribute("width",24),d.setAttribute("height",24),u.textContent=o.name,i.appendChild(r),r.appendChild(d),r.appendChild(u),r.addEventListener("click",v=>n(r))}),t.appendChild(i)})}function P(){const e=document.getElementById("btn_patch"),t=document.getElementById("div_patch"),n=a=>{f(a.getAttribute("value"));var i=document.getElementsByClassName("patch_container")[0];i.parentElement.removeChild(i)};e.addEventListener("click",a=>{if(t.childElementCount!=1){n(e);return}var i=document.createElement("div");i.classList.add("patch_container"),ARRAY_PATCH_INFO.forEach(o=>{var r=document.createElement("button"),d=document.createElement("span");r.setAttribute("type","button"),r.setAttribute("value",o.val),r.classList.add("option_button"),d.textContent=o.name,i.appendChild(r),r.appendChild(d),r.addEventListener("click",u=>n(r))}),t.appendChild(i)})}function B(e,t=null){var n=document.getElementById("mainHeroContainer"),a=n.children,i=n.getAttribute("sort"),o=i=="desc"?"asc":"desc";t!=null&&t==!0?o="asc":t!=null&&t==!1&&(o="desc"),n.setAttribute("sort",o);var r=o=="desc"?1:-1,d=Array.prototype.slice.call(a,0);d.sort(function(u,v){var m=u.getElementsByTagName("td")[e],E=v.getElementsByTagName("td")[e],h=(m.textContent||m.innerText).replace("%",""),_=(E.textContent||E.innerText).replace("%","");if(Number(h)&&(h=Number(h)),Number(_)&&(_=Number(_)),h==_){m=u.getElementsByTagName("td")[4],E=v.getElementsByTagName("td")[4];var L=(m.textContent||m.innerText).replace("%",""),N=(E.textContent||E.innerText).replace("%","");return L>N?r:L<N?-r:0}return h>_?-r:h<_?r:0}),d.forEach(u=>{n.appendChild(u)})}function S(e,t){t!=6&&B(t)}function D(){var e=document.getElementsByTagName("thead")[0],t=e.children[0].children;for(let n=0;n<t.length;n++){const a=t[n];a.setAttribute("index",n),a.addEventListener("click",i=>S(i,n))}}function j(){R(),P()}function T(){document.getElementById("mainHeroContainer").innerHTML="";var e=C,t=H[0],n=w()/10,a=null;p==0?a=e:a=e.filter(v=>v.lane_role_1==p||v.lane_role_2==p||v.lane_role_3==p),console.log(a);for(let v=0;v<a.length;v++){const m=a[v];var i=t[`${n}_pick`],o=m[`${n}_win`],r=m[`${n}_pick`],d=(o/r*100).toFixed(1),u=(r/i*1e3).toFixed(1);g(m.hero_id,`img/heroes/${m.real_name}.png`,m.localized_name_kor,m[`${n}_tier`],u,d,"-")}B(2,!0)}function F(){var e=document.getElementsByClassName("role_list")[0],t=e.getElementsByTagName("button");for(let n=0;n<t.length;n++){const a=t[n];a.setAttribute("id",`btn_role_${n}`),a.addEventListener("click",i=>{var o=e.getElementsByClassName("role_active")[0];o&&o.classList.remove("role_active"),a.classList.add("role_active"),b(n),T()})}t[p].classList.add("role_active")}function O(){fetch("http://127.0.0.1:5001/databases").then(e=>e.json()).then(e=>{const t=e[0];U(t).then(n=>{V(),Promise.all([Y(),q()]).then(a=>{F(),l(),T(),j(),D(),s(y),f($)})})})}O()};function Y(){return new Promise((c,g)=>{for(var l=I.prepare("select * from Hero");l.step();){var s=l.getAsObject();C.push(s)}l.free(),c()})}function q(){return new Promise((c,g)=>{for(var l=I.prepare("select * from Matches");l.step();){var s=l.getAsObject();H.push(s)}l.free(),c()})}function V(){sessionStorage.getItem("tier")&&(y=sessionStorage.getItem("tier")),sessionStorage.getItem("patch")&&($=sessionStorage.getItem("patch"))}function z(c){return new Promise((g,l)=>{var s=new XMLHttpRequest;s.open("get",`http://127.0.0.1:5001/db/${c}`,!0),s.responseType="arraybuffer",s.onload=f=>{var b=new Uint8Array(s.response);g({data:s.response,array:b})},s.send()})}function U(c){var g={locateFile:l=>`/dist/${l}`};return initSqlJs(g).then(function(l){return x=l,z(c)}).then(l=>(I=new x.Database(l.array),I))}function G(c){return J(c,K(),w(),55,20,!0)}function w(){return y}function J(c,g,l,s,f,b){return`search.html?id=${c}&patchVersion=${g}&rank=${l}&winrate=${s}&minPlayedCount=${f}&unranked=${b}`}function K(){return $}
